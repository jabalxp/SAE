<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Museu de Conquistas - SteamTrack</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&family=Rajdhani:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="languages.js"></script>
    
    <style>
        :root {
            --primary-color: #00f3ff;
            --secondary-color: #bc13fe;
            --bg-dark: #050b14;
            --bg-panel: rgba(16, 26, 46, 0.95);
            --text-main: #e0e6ed;
            --text-dim: #94a3b8;
            --success: #00ff9d;
            --gold: #ffd700;
            --font-display: 'Orbitron', sans-serif;
            --font-body: 'Rajdhani', sans-serif;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: var(--font-body); 
            background: var(--bg-dark); 
            color: var(--text-main); 
            overflow: hidden;
        }
        
        #canvas3d {
            width: 100vw;
            height: 100vh;
            display: block;
        }
        
        .ui-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(180deg, rgba(5,11,20,0.9) 0%, transparent 100%);
            z-index: 100;
        }
        
        .logo { 
            font-family: var(--font-display); 
            font-size: 20px; 
            color: var(--primary-color); 
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .main-nav { display: flex; gap: 10px; align-items: center; }
        .nav-btn { background: transparent; border: 1px solid transparent; color: var(--text-dim); padding: 8px 16px; border-radius: 20px; cursor: pointer; font-family: var(--font-display); text-decoration: none; font-size: 11px; transition: 0.3s; }
        .nav-btn:hover, .nav-btn.active { background: rgba(255,255,255,0.1); color: var(--primary-color); }
        .nav-btn.primary { background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); color: #000; font-weight: bold; padding: 8px 20px; border: none; }
        .nav-btn.primary:hover { transform: scale(1.05); box-shadow: 0 0 15px var(--primary-color); }
        .nav-menu-container { position: relative; }
        .nav-menu-btn { background: rgba(255,255,255,0.1); border: 1px solid rgba(0,243,255,0.2); color: var(--text-main); padding: 8px 15px; border-radius: 15px; cursor: pointer; font-family: var(--font-display); font-size: 11px; display: flex; align-items: center; gap: 8px; transition: 0.3s; }
        .nav-menu-btn:hover { background: rgba(255,255,255,0.15); color: var(--primary-color); }
        .nav-menu-dropdown { position: absolute; top: 100%; right: 0; margin-top: 10px; background: var(--bg-panel); border: 1px solid rgba(0,243,255,0.2); border-radius: 12px; min-width: 180px; padding: 10px 0; box-shadow: 0 10px 40px rgba(0,0,0,0.5); opacity: 0; visibility: hidden; transform: translateY(-10px); transition: all 0.3s ease; z-index: 1000; }
        .nav-menu-container:hover .nav-menu-dropdown { opacity: 1; visibility: visible; transform: translateY(0); }
        .nav-menu-dropdown a { display: flex; align-items: center; gap: 12px; padding: 12px 20px; color: var(--text-main); text-decoration: none; font-size: 14px; transition: 0.2s; }
        .nav-menu-dropdown a:hover { background: rgba(0,243,255,0.1); color: var(--primary-color); }
        .nav-menu-dropdown a i { width: 20px; text-align: center; color: var(--primary-color); }
        
        .controls-panel {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--bg-panel);
            padding: 15px 30px;
            border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.1);
            display: flex;
            gap: 20px;
            z-index: 100;
        }
        
        .control-btn {
            background: rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.1);
            color: var(--text-main);
            padding: 12px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }
        
        .control-btn:hover { 
            background: var(--primary-color);
            color: black;
        }
        
        .control-btn.active {
            background: var(--primary-color);
            color: black;
        }
        
        .stats-panel {
            position: fixed;
            right: 20px;
            top: 100px;
            background: var(--bg-panel);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.1);
            min-width: 250px;
            z-index: 100;
        }
        
        .stats-title {
            font-family: var(--font-display);
            font-size: 16px;
            margin-bottom: 15px;
            color: var(--primary-color);
        }
        
        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        
        .stat-label { color: var(--text-dim); }
        .stat-value { font-weight: bold; font-family: var(--font-display); }
        
        .trophy-info {
            position: fixed;
            left: 20px;
            bottom: 100px;
            background: var(--bg-panel);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.1);
            max-width: 300px;
            z-index: 100;
            display: none;
        }
        
        .trophy-info.visible { display: block; }
        
        .trophy-game {
            font-family: var(--font-display);
            font-size: 18px;
            color: var(--gold);
            margin-bottom: 10px;
        }
        
        .trophy-detail {
            font-size: 14px;
            color: var(--text-dim);
            margin: 5px 0;
        }
        
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--bg-dark);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 200;
        }
        
        .loading-screen.hidden { display: none; }
        
        .loading-text {
            font-family: var(--font-display);
            font-size: 24px;
            margin-top: 20px;
        }
        
        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(0,243,255,0.2);
            border-top-color: var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .instructions {
            position: fixed;
            left: 20px;
            top: 100px;
            background: var(--bg-panel);
            padding: 15px 20px;
            border-radius: 10px;
            border: 1px solid rgba(255,255,255,0.1);
            font-size: 14px;
            z-index: 100;
        }
        
        .instructions p {
            margin: 5px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .key {
            background: rgba(0,0,0,0.5);
            padding: 3px 8px;
            border-radius: 5px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="loading-screen" id="loadingScreen">
        <div class="spinner"></div>
        <div class="loading-text">Carregando Museu...</div>
    </div>
    
    <canvas id="canvas3d"></canvas>
    
    <div class="ui-overlay">
        <a href="museum.html" class="logo"><i class="fas fa-landmark"></i> MUSEU 3D</a>
        <a href="index.html" class="nav-btn" style="background: rgba(0,0,0,0.5); border: 1px solid var(--primary-color);"><i class="fas fa-arrow-left"></i> Voltar</a>
    </div>
    
    <div class="instructions">
        <p><span class="key">W A S D</span> Mover</p>
        <p><span class="key">Mouse</span> Olhar</p>
        <p><span class="key">Click</span> Selecionar trof√©u</p>
    </div>
    
    <div class="stats-panel">
        <div class="stats-title"><i class="fas fa-chart-bar"></i> ESTAT√çSTICAS</div>
        <div class="stat-row">
            <span class="stat-label">Platinas</span>
            <span class="stat-value" id="platCount">0</span>
        </div>
        <div class="stat-row">
            <span class="stat-label">Trof√©us Exibidos</span>
            <span class="stat-value" id="trophyCount">0</span>
        </div>
        <div class="stat-row">
            <span class="stat-label">Rarity Score</span>
            <span class="stat-value" id="rarityScore">0</span>
        </div>
    </div>
    
    <div class="trophy-info" id="trophyInfo">
        <div class="trophy-game" id="trophyGame">-</div>
        <div class="trophy-detail" id="trophyAchievements">Conquistas: -</div>
        <div class="trophy-detail" id="trophyHours">Horas: -</div>
        <div class="trophy-detail" id="trophyDate">Platinado em: -</div>
    </div>
    
    <div class="controls-panel">
        <button class="control-btn" onclick="resetCamera()">
            <i class="fas fa-home"></i> Reset C√¢mera
        </button>
        <button class="control-btn" onclick="toggleAutoRotate()">
            <i class="fas fa-sync"></i> Auto Rota√ß√£o
        </button>
        <button class="control-btn" onclick="changeLayout('circle')">
            <i class="fas fa-circle"></i> C√≠rculo
        </button>
        <button class="control-btn" onclick="changeLayout('grid')">
            <i class="fas fa-th"></i> Grid
        </button>
        <button class="control-btn" onclick="changeLayout('spiral')">
            <i class="fas fa-spinner"></i> Espiral
        </button>
    </div>

    <script>
        // Vari√°veis globais
        let scene, camera, renderer, controls;
        let trophies = [];
        let selectedTrophy = null;
        let autoRotate = false;
        let currentLayout = 'circle';
        
        // Movimento
        const keys = { w: false, a: false, s: false, d: false };
        let mouseX = 0, mouseY = 0;
        let isPointerLocked = false;
        
        // Dados de platinas - ser√° carregado do localStorage
        let platinumGames = [];
        
        // Carregar dados da biblioteca
        function loadPlatinumGames() {
            try {
                // Tentar v√°rias chaves poss√≠veis de localStorage
                let games = null;
                
                // 1. Tentar chave padr√£o currentGames
                const savedGames = localStorage.getItem('currentGames');
                if (savedGames) {
                    games = JSON.parse(savedGames);
                }
                
                // 2. Se n√£o encontrou, tentar buscar do IndexedDB/SteamCache via lastSteamId
                if (!games || games.length === 0) {
                    const steamId = localStorage.getItem('lastSteamId');
                    if (steamId) {
                        const steamGamesKey = `steamGames_${steamId}`;
                        const steamGamesData = localStorage.getItem(steamGamesKey);
                        if (steamGamesData) {
                            games = JSON.parse(steamGamesData);
                        }
                    }
                }
                
                // 3. Verificar tamb√©m userStats para saber se tem platinas
                const userStats = localStorage.getItem('userStats');
                let platCount = 0;
                if (userStats) {
                    const stats = JSON.parse(userStats);
                    platCount = stats.totalPlatinum || 0;
                    console.log('üìä Stats indica', platCount, 'platinas');
                }
                
                if (games && games.length > 0) {
                    console.log('üéÆ Jogos encontrados:', games.length);
                    // Filtrar apenas jogos platinados (100%)
                    platinumGames = games
                        .filter(g => g.percent === 100 || g.completion === 100)
                        .map(g => ({
                            name: g.name,
                            appid: g.appid,
                            achievements: g.total || g.unlocked || 0,
                            hours: g.playtime_hours || Math.round((g.playtime_forever || 0) / 60),
                            date: new Date().toISOString().split('T')[0],
                            rarity: Math.random() * 15 + 1
                        }));
                    console.log('üèÜ Platinas filtradas:', platinumGames.length);
                }
                
                // Fallback se n√£o houver platinas na biblioteca
                if (platinumGames.length === 0) {
                    platinumGames = [
                        { name: 'Nenhuma platina ainda!', appid: 0, achievements: 0, hours: 0, date: '-', rarity: 0 }
                    ];
                    
                    // Mostrar mensagem
                    const msg = document.createElement('div');
                    msg.style.cssText = 'position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:var(--bg-panel);padding:30px;border-radius:15px;border:1px solid var(--primary-color);text-align:center;z-index:300;';
                    msg.innerHTML = `
                        <i class="fas fa-trophy" style="font-size:48px;color:var(--gold);margin-bottom:15px;display:block;"></i>
                        <h2 style="margin-bottom:10px;">Museu Vazio</h2>
                        <p style="color:var(--text-dim);">Carregue sua biblioteca no SteamTrack primeiro<br>e complete 100% de algum jogo para ver suas platinas aqui!</p>
                        <a href="index.html" style="display:inline-block;margin-top:20px;padding:10px 25px;background:var(--primary-color);color:#000;text-decoration:none;border-radius:10px;font-weight:bold;">Ir para Biblioteca</a>
                    `;
                    document.body.appendChild(msg);
                }
            } catch (e) {
                console.error('Erro ao carregar platinas:', e);
                platinumGames = [
                    { name: 'Erro ao carregar', appid: 0, achievements: 0, hours: 0, date: '-', rarity: 0 }
                ];
            }
        }
        
        function init() {
            // Carregar dados primeiro
            loadPlatinumGames();
            
            // Scene
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x050b14);
            scene.fog = new THREE.Fog(0x050b14, 10, 100);
            
            // Camera
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 5, 20);
            
            // Renderer
            renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('canvas3d'), antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMap.enabled = true;
            
            // Lights
            const ambientLight = new THREE.AmbientLight(0x404040, 0.5);
            scene.add(ambientLight);
            
            const pointLight = new THREE.PointLight(0x00f3ff, 2, 100);
            pointLight.position.set(0, 20, 0);
            scene.add(pointLight);
            
            const spotLight = new THREE.SpotLight(0xffd700, 1);
            spotLight.position.set(0, 30, 0);
            spotLight.castShadow = true;
            scene.add(spotLight);
            
            // Floor
            createFloor();
            
            // Trophies
            createTrophies();
            
            // Event Listeners
            document.addEventListener('keydown', onKeyDown);
            document.addEventListener('keyup', onKeyUp);
            document.addEventListener('mousemove', onMouseMove);
            document.addEventListener('click', onClick);
            window.addEventListener('resize', onWindowResize);
            
            // Hide loading
            setTimeout(() => {
                document.getElementById('loadingScreen').classList.add('hidden');
            }, 1500);
            
            // Update stats
            document.getElementById('platCount').innerText = platinumGames.length;
            document.getElementById('trophyCount').innerText = platinumGames.length;
            document.getElementById('rarityScore').innerText = 
                Math.round(platinumGames.reduce((sum, g) => sum + g.rarity, 0) / platinumGames.length * 10) / 10;
            
            animate();
        }
        
        function createFloor() {
            // Grid floor
            const gridHelper = new THREE.GridHelper(100, 50, 0x00f3ff, 0x1a1a2e);
            gridHelper.position.y = -0.5;
            scene.add(gridHelper);
            
            // Solid floor
            const floorGeometry = new THREE.PlaneGeometry(100, 100);
            const floorMaterial = new THREE.MeshStandardMaterial({ 
                color: 0x0a1628,
                roughness: 0.8,
                metalness: 0.2
            });
            const floor = new THREE.Mesh(floorGeometry, floorMaterial);
            floor.rotation.x = -Math.PI / 2;
            floor.position.y = -0.5;
            floor.receiveShadow = true;
            scene.add(floor);
        }
        
        function createTrophies() {
            trophies.forEach(t => scene.remove(t.mesh));
            trophies = [];
            
            platinumGames.forEach((game, i) => {
                const trophy = createTrophy(game, i);
                trophies.push(trophy);
                scene.add(trophy.mesh);
            });
            
            applyLayout(currentLayout);
        }
        
        function createTrophy(game, index) {
            // Grupo do trof√©u
            const group = new THREE.Group();
            
            // Base
            const baseGeometry = new THREE.CylinderGeometry(0.8, 1, 0.3, 6);
            const baseMaterial = new THREE.MeshStandardMaterial({ 
                color: 0x1a1a2e,
                metalness: 0.8,
                roughness: 0.2
            });
            const base = new THREE.Mesh(baseGeometry, baseMaterial);
            base.position.y = 0.15;
            group.add(base);
            
            // Pilar
            const pillarGeometry = new THREE.CylinderGeometry(0.3, 0.4, 1.5, 8);
            const pillarMaterial = new THREE.MeshStandardMaterial({ 
                color: 0xffd700,
                metalness: 0.9,
                roughness: 0.1
            });
            const pillar = new THREE.Mesh(pillarGeometry, pillarMaterial);
            pillar.position.y = 1;
            group.add(pillar);
            
            // Ta√ßa (copa)
            const cupGeometry = new THREE.SphereGeometry(0.6, 16, 12, 0, Math.PI * 2, 0, Math.PI / 2);
            const cupMaterial = new THREE.MeshStandardMaterial({ 
                color: 0xffd700,
                metalness: 0.95,
                roughness: 0.05,
                side: THREE.DoubleSide
            });
            const cup = new THREE.Mesh(cupGeometry, cupMaterial);
            cup.rotation.x = Math.PI;
            cup.position.y = 2.2;
            group.add(cup);
            
            // Borda da ta√ßa
            const rimGeometry = new THREE.TorusGeometry(0.6, 0.08, 8, 32);
            const rim = new THREE.Mesh(rimGeometry, pillarMaterial);
            rim.rotation.x = Math.PI / 2;
            rim.position.y = 2.2;
            group.add(rim);
            
            // Al√ßas
            const handleGeometry = new THREE.TorusGeometry(0.35, 0.06, 8, 16, Math.PI);
            const leftHandle = new THREE.Mesh(handleGeometry, pillarMaterial);
            leftHandle.position.set(-0.8, 2, 0);
            leftHandle.rotation.z = -Math.PI / 2;
            group.add(leftHandle);
            
            const rightHandle = new THREE.Mesh(handleGeometry, pillarMaterial);
            rightHandle.position.set(0.8, 2, 0);
            rightHandle.rotation.z = Math.PI / 2;
            group.add(rightHandle);
            
            // Glow
            const glowGeometry = new THREE.SphereGeometry(1.2, 16, 16);
            const glowMaterial = new THREE.MeshBasicMaterial({
                color: 0xffd700,
                transparent: true,
                opacity: 0.1
            });
            const glow = new THREE.Mesh(glowGeometry, glowMaterial);
            glow.position.y = 1.8;
            group.add(glow);
            
            // Plataforma com luz
            const platformLight = new THREE.PointLight(0xffd700, 0.5, 5);
            platformLight.position.y = 0.5;
            group.add(platformLight);
            
            group.castShadow = true;
            
            return {
                mesh: group,
                data: game,
                index: index,
                originalY: 0
            };
        }
        
        function applyLayout(layout) {
            currentLayout = layout;
            const count = trophies.length;
            
            trophies.forEach((trophy, i) => {
                let x, z;
                
                switch (layout) {
                    case 'circle':
                        const angle = (i / count) * Math.PI * 2;
                        const radius = 12;
                        x = Math.cos(angle) * radius;
                        z = Math.sin(angle) * radius;
                        break;
                        
                    case 'grid':
                        const cols = Math.ceil(Math.sqrt(count));
                        const row = Math.floor(i / cols);
                        const col = i % cols;
                        x = (col - cols / 2 + 0.5) * 4;
                        z = (row - Math.ceil(count / cols) / 2 + 0.5) * 4;
                        break;
                        
                    case 'spiral':
                        const t = i / count;
                        const spiralRadius = 5 + t * 10;
                        const spiralAngle = t * Math.PI * 4;
                        x = Math.cos(spiralAngle) * spiralRadius;
                        z = Math.sin(spiralAngle) * spiralRadius;
                        break;
                }
                
                // Anima√ß√£o suave
                animateTrophy(trophy.mesh, x, z);
            });
        }
        
        function animateTrophy(mesh, targetX, targetZ) {
            const startX = mesh.position.x;
            const startZ = mesh.position.z;
            const duration = 1000;
            const startTime = Date.now();
            
            function update() {
                const elapsed = Date.now() - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const eased = 1 - Math.pow(1 - progress, 3); // ease out cubic
                
                mesh.position.x = startX + (targetX - startX) * eased;
                mesh.position.z = startZ + (targetZ - startZ) * eased;
                
                if (progress < 1) {
                    requestAnimationFrame(update);
                }
            }
            update();
        }
        
        function onKeyDown(e) {
            keys[e.key.toLowerCase()] = true;
        }
        
        function onKeyUp(e) {
            keys[e.key.toLowerCase()] = false;
        }
        
        function onMouseMove(e) {
            if (!isPointerLocked) {
                mouseX = (e.clientX / window.innerWidth) * 2 - 1;
                mouseY = (e.clientY / window.innerHeight) * 2 - 1;
            }
        }
        
        function onClick(e) {
            // Raycaster para detectar clique em trof√©u
            const raycaster = new THREE.Raycaster();
            const mouse = new THREE.Vector2();
            mouse.x = (e.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;
            
            raycaster.setFromCamera(mouse, camera);
            
            const meshes = trophies.map(t => t.mesh);
            const intersects = raycaster.intersectObjects(meshes, true);
            
            if (intersects.length > 0) {
                let clickedMesh = intersects[0].object;
                while (clickedMesh.parent && !trophies.find(t => t.mesh === clickedMesh)) {
                    clickedMesh = clickedMesh.parent;
                }
                
                const trophy = trophies.find(t => t.mesh === clickedMesh);
                if (trophy) {
                    selectTrophy(trophy);
                }
            } else {
                deselectTrophy();
            }
        }
        
        function selectTrophy(trophy) {
            // Desselecionar anterior
            if (selectedTrophy) {
                selectedTrophy.mesh.scale.set(1, 1, 1);
            }
            
            selectedTrophy = trophy;
            trophy.mesh.scale.set(1.2, 1.2, 1.2);
            
            // Mostrar info
            const info = document.getElementById('trophyInfo');
            document.getElementById('trophyGame').innerText = trophy.data.name;
            document.getElementById('trophyAchievements').innerText = `Conquistas: ${trophy.data.achievements}`;
            document.getElementById('trophyHours').innerText = `Horas: ${trophy.data.hours}h`;
            document.getElementById('trophyDate').innerText = `Platinado em: ${trophy.data.date}`;
            info.classList.add('visible');
            
            // Mover c√¢mera
            const targetPos = trophy.mesh.position.clone();
            targetPos.z += 5;
            targetPos.y = 3;
            
            animateCamera(targetPos);
        }
        
        function deselectTrophy() {
            if (selectedTrophy) {
                selectedTrophy.mesh.scale.set(1, 1, 1);
                selectedTrophy = null;
            }
            document.getElementById('trophyInfo').classList.remove('visible');
        }
        
        function animateCamera(target) {
            const startPos = camera.position.clone();
            const duration = 800;
            const startTime = Date.now();
            
            function update() {
                const elapsed = Date.now() - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const eased = 1 - Math.pow(1 - progress, 3);
                
                camera.position.lerpVectors(startPos, target, eased);
                
                if (progress < 1) {
                    requestAnimationFrame(update);
                }
            }
            update();
        }
        
        function resetCamera() {
            deselectTrophy();
            animateCamera(new THREE.Vector3(0, 5, 20));
        }
        
        function toggleAutoRotate() {
            autoRotate = !autoRotate;
            document.querySelector('.control-btn:nth-child(2)').classList.toggle('active', autoRotate);
        }
        
        function changeLayout(layout) {
            applyLayout(layout);
            document.querySelectorAll('.control-btn').forEach(btn => btn.classList.remove('active'));
        }
        
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }
        
        function animate() {
            requestAnimationFrame(animate);
            
            // Movimento WASD
            const speed = 0.2;
            if (keys.w) camera.position.z -= speed;
            if (keys.s) camera.position.z += speed;
            if (keys.a) camera.position.x -= speed;
            if (keys.d) camera.position.x += speed;
            
            // Rota√ß√£o baseada no mouse
            if (!selectedTrophy) {
                camera.rotation.y = -mouseX * 0.3;
                camera.rotation.x = -mouseY * 0.1;
            }
            
            // Auto rota√ß√£o da cena
            if (autoRotate) {
                trophies.forEach(trophy => {
                    trophy.mesh.rotation.y += 0.005;
                });
            }
            
            // Anima√ß√£o hover dos trof√©us
            trophies.forEach((trophy, i) => {
                const hover = Math.sin(Date.now() * 0.002 + i) * 0.1;
                trophy.mesh.position.y = hover;
            });
            
            renderer.render(scene, camera);
        }
        
        // Inicializar
        init();
    </script>
</body>
</html>
