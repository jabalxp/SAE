<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Histórico de Preços - SteamTrack</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&family=Rajdhani:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="languages.js"></script>
    <style>
        :root {
            --primary-color: #00f3ff;
            --secondary-color: #bc13fe;
            --bg-dark: #050b14;
            --bg-panel: rgba(16, 26, 46, 0.95);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-main: #e0e6ed;
            --text-dim: #94a3b8;
            --success: #00ff9d;
            --warning: #ffbd2e;
            --danger: #ff0055;
            --font-display: 'Orbitron', sans-serif;
            --font-body: 'Rajdhani', sans-serif;
        }
        
        /* TEMAS */
        body.theme-matrix { --primary-color: #00ff41; --secondary-color: #008f11; --bg-dark: #000000; --bg-panel: rgba(0, 20, 0, 0.95); }
        body.theme-fire { --primary-color: #ffbd2e; --secondary-color: #ff0055; --bg-dark: #1a0505; --bg-panel: rgba(40, 10, 10, 0.95); }
        body.theme-retro { --primary-color: #fca311; --secondary-color: #14213d; --bg-dark: #101010; --bg-panel: #1a1a1a; --glass-border: #404040; --text-main: #e5e5e5; --text-dim: #a0a0a0; --font-display: 'Press Start 2P', cursive; }
        body.theme-light { --primary-color: #007bff; --secondary-color: #6c757d; --bg-dark: #f8f9fa; --bg-panel: #ffffff; --glass-border: #dee2e6; --text-main: #212529; --text-dim: #6c757d; }
        body.theme-dark { --primary-color: #e83e8c; --secondary-color: #6f42c1; --bg-dark: #000000; --bg-panel: rgba(20, 20, 20, 0.95); --glass-border: rgba(255,255,255,0.15); --text-main: #f8f9fa; --text-dim: #adb5bd; }
        
        @keyframes rgb-color-cycle {
            0% { --primary-color: #ff00de; --secondary-color: #deff00; }
            25% { --primary-color: #00ffde; --secondary-color: #de00ff; }
            50% { --primary-color: #de00ff; --secondary-color: #00deff; }
            75% { --primary-color: #ffde00; --secondary-color: #00ffde; }
            100% { --primary-color: #ff00de; --secondary-color: #deff00; }
        }
        body.theme-rgb { animation: rgb-color-cycle 8s linear infinite; }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: var(--font-body); 
            background: var(--bg-dark); 
            color: var(--text-main); 
            min-height: 100vh;
            background: linear-gradient(135deg, #050b14 0%, #0a1628 50%, #050b14 100%);
        }
        
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        
        header {
            background: var(--bg-panel);
            border-bottom: 1px solid rgba(0,243,255,0.2);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo { font-family: var(--font-display); font-size: 20px; color: var(--primary-color); text-decoration: none; display: flex; align-items: center; gap: 10px; }
        .main-nav { display: flex; gap: 10px; align-items: center; }
        .nav-btn { background: transparent; border: 1px solid transparent; color: var(--text-dim); padding: 8px 16px; border-radius: 20px; cursor: pointer; font-family: var(--font-display); text-decoration: none; font-size: 11px; transition: 0.3s; }
        .nav-btn:hover, .nav-btn.active { background: rgba(255,255,255,0.1); color: var(--primary-color); }
        .nav-btn.primary { background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); color: #000; font-weight: bold; padding: 8px 20px; border: none; }
        .nav-btn.primary:hover { transform: scale(1.05); box-shadow: 0 0 15px var(--primary-color); }
        .nav-menu-container { position: relative; }
        .nav-menu-btn { background: rgba(255,255,255,0.1); border: 1px solid rgba(0,243,255,0.2); color: var(--text-main); padding: 8px 15px; border-radius: 15px; cursor: pointer; font-family: var(--font-display); font-size: 11px; display: flex; align-items: center; gap: 8px; transition: 0.3s; }
        .nav-menu-btn:hover { background: rgba(255,255,255,0.15); color: var(--primary-color); }
        .nav-menu-dropdown { position: absolute; top: 100%; right: 0; margin-top: 10px; background: var(--bg-panel); border: 1px solid rgba(0,243,255,0.2); border-radius: 12px; min-width: 180px; padding: 10px 0; box-shadow: 0 10px 40px rgba(0,0,0,0.5); opacity: 0; visibility: hidden; transform: translateY(-10px); transition: all 0.3s ease; z-index: 1000; }
        .nav-menu-container:hover .nav-menu-dropdown { opacity: 1; visibility: visible; transform: translateY(0); }
        .nav-menu-dropdown a { display: flex; align-items: center; gap: 12px; padding: 12px 20px; color: var(--text-main); text-decoration: none; font-size: 14px; transition: 0.2s; }
        .nav-menu-dropdown a:hover { background: rgba(0,243,255,0.1); color: var(--primary-color); }
        .nav-menu-dropdown a i { width: 20px; text-align: center; color: var(--primary-color); }
        
        h1 { font-family: var(--font-display); font-size: 28px; margin: 30px 0; text-align: center; }
        h1 i { color: var(--success); margin-right: 10px; }
        
        .search-section {
            background: var(--bg-panel);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .search-box {
            display: flex;
            gap: 15px;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .search-input {
            flex: 1;
            padding: 15px 20px;
            border-radius: 10px;
            border: 1px solid rgba(255,255,255,0.1);
            background: rgba(0,0,0,0.3);
            color: var(--text-main);
            font-size: 16px;
            font-family: var(--font-body);
        }
        
        .search-btn {
            padding: 15px 30px;
            border-radius: 10px;
            border: none;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .search-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0,243,255,0.3);
        }
        
        .game-result {
            background: var(--bg-panel);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid rgba(255,255,255,0.1);
            display: none;
        }
        
        .game-result.active { display: block; }
        
        .game-header {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .game-image {
            width: 300px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
        }
        
        .game-info { flex: 1; }
        .game-title { font-family: var(--font-display); font-size: 24px; margin-bottom: 10px; }
        
        .price-current {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 15px 0;
        }
        
        .price-tag {
            font-size: 32px;
            font-weight: bold;
            color: var(--success);
        }
        
        .price-original {
            font-size: 18px;
            color: var(--text-dim);
            text-decoration: line-through;
        }
        
        .discount-badge {
            background: var(--success);
            color: black;
            padding: 5px 15px;
            border-radius: 5px;
            font-weight: bold;
        }
        
        .stores-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .store-card {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid rgba(255,255,255,0.05);
            transition: all 0.3s;
        }
        
        .store-card:hover {
            border-color: var(--primary-color);
            transform: translateY(-2px);
        }
        
        .store-name { font-weight: bold; }
        .store-price { color: var(--success); font-size: 18px; font-weight: bold; }
        .store-link {
            background: var(--primary-color);
            color: black;
            padding: 8px 15px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            font-size: 14px;
        }
        
        .chart-section {
            background: var(--bg-panel);
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .chart-title {
            font-family: var(--font-display);
            font-size: 18px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .chart-container { height: 300px; }
        
        .price-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        
        .stat-card {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }
        
        .stat-label { color: var(--text-dim); font-size: 12px; text-transform: uppercase; }
        .stat-value { font-size: 24px; font-weight: bold; margin-top: 5px; }
        .stat-value.green { color: var(--success); }
        .stat-value.red { color: var(--danger); }
        .stat-value.blue { color: var(--primary-color); }
        
        .loader {
            text-align: center;
            padding: 50px;
            display: none;
        }
        
        .loader.active { display: block; }
        .loader i { font-size: 40px; color: var(--primary-color); }
        
        .no-data {
            text-align: center;
            padding: 50px;
            color: var(--text-dim);
        }
        
        .wishlist-section {
            margin-top: 40px;
        }
        
        .section-title {
            font-family: var(--font-display);
            font-size: 20px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .wishlist-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .wishlist-card {
            background: var(--bg-panel);
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.1);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .wishlist-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,243,255,0.2);
        }
        
        .wishlist-img { width: 100%; height: 120px; object-fit: cover; }
        .wishlist-info { padding: 15px; }
        .wishlist-name { font-weight: bold; margin-bottom: 5px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .wishlist-price { color: var(--success); }
        
        @media (max-width: 768px) {
            .game-header { flex-direction: column; }
            .game-image { width: 100%; }
            .price-stats { grid-template-columns: repeat(2, 1fr); }
        }
    </style>
</head>
<body>
    <header>
        <a href="prices.html" class="logo"><i class="fas fa-chart-line"></i> PREÇOS</a>
        <nav class="main-nav">
            <a href="prices.html" class="nav-btn primary active"><i class="fas fa-chart-line"></i> PREÇOS</a>
            <div class="nav-menu-container">
                <button class="nav-menu-btn"><i class="fas fa-bars"></i> MENU <i class="fas fa-chevron-down" style="font-size:8px;"></i></button>
                <div class="nav-menu-dropdown">
                    <a href="index.html"><i class="fas fa-gamepad"></i> Biblioteca</a>
                    <a href="hall.html"><i class="fas fa-trophy"></i> Hall da Fama</a>
                    <a href="roleta.html"><i class="fas fa-dice"></i> Roleta</a>
                    <a href="level.html"><i class="fas fa-star"></i> Level / XP</a>
                    <a href="compare.html"><i class="fas fa-users"></i> Comparar Perfis</a>
                    <a href="museum.html"><i class="fas fa-landmark"></i> Museu 3D</a>
                    <a href="wallpaper.html"><i class="fas fa-image"></i> Wallpapers</a>
                </div>
            </div>
        </nav>
    </header>
    
    <div class="container">
        <h1><i class="fas fa-chart-line"></i> Histórico de Preços</h1>
        
        <div class="search-section">
            <div class="search-box">
                <input type="text" class="search-input" id="gameSearch" placeholder="Buscar jogo (ex: Elden Ring, Cyberpunk 2077...)">
                <button class="search-btn" onclick="searchGame()"><i class="fas fa-search"></i> Buscar</button>
            </div>
        </div>
        
        <div class="loader" id="loader">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Buscando preços...</p>
        </div>
        
        <div class="game-result" id="gameResult">
            <div class="game-header">
                <img src="" alt="" class="game-image" id="resultImage">
                <div class="game-info">
                    <h2 class="game-title" id="resultTitle">Nome do Jogo</h2>
                    <div class="price-current">
                        <span class="price-tag" id="resultPrice">R$ 0,00</span>
                        <span class="price-original" id="resultOriginal"></span>
                        <span class="discount-badge" id="resultDiscount" style="display:none">-0%</span>
                    </div>
                    <p id="resultDesc" style="color: var(--text-dim); margin-top: 10px;"></p>
                </div>
            </div>
            
            <h3 class="section-title"><i class="fas fa-store"></i> Melhores Preços Agora</h3>
            <div class="stores-grid" id="storesGrid"></div>
            
            <div class="chart-section">
                <h3 class="chart-title"><i class="fas fa-history"></i> Histórico de Preços (últimos 12 meses)</h3>
                <div class="chart-container">
                    <canvas id="priceChart"></canvas>
                </div>
                
                <div class="price-stats">
                    <div class="stat-card">
                        <div class="stat-label">Menor Preço</div>
                        <div class="stat-value green" id="statLowest">-</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Maior Preço</div>
                        <div class="stat-value red" id="statHighest">-</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Preço Médio</div>
                        <div class="stat-value blue" id="statAverage">-</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Economia Atual</div>
                        <div class="stat-value green" id="statSavings">-</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="wishlist-section">
            <h3 class="section-title"><i class="fas fa-fire"></i> Jogos em Promoção</h3>
            <div class="wishlist-grid" id="dealsGrid"></div>
        </div>
    </div>
    
    <script>
        let priceChart = null;
        
        // Carregar deals ao iniciar
        document.addEventListener('DOMContentLoaded', loadTopDeals);
        
        async function searchGame() {
            const query = document.getElementById('gameSearch').value.trim();
            if (!query) {
                document.getElementById('gameSearch').style.border = '2px solid #ff0055';
                setTimeout(() => document.getElementById('gameSearch').style.border = '', 2000);
                return;
            }
            
            document.getElementById('loader').classList.add('active');
            document.getElementById('gameResult').classList.remove('active');
            
            try {
                // Buscar usando a API ITAD através do nosso proxy
                const response = await fetch(`http://localhost:3000/api/prices?game=${encodeURIComponent(query)}`);
                const data = await response.json();
                
                if (data.error) throw new Error(data.error);
                
                displayGameResult(data);
            } catch (error) {
                console.error('Erro:', error);
                // Fallback: mostrar dados simulados para demo
                displayDemoData(query);
            } finally {
                document.getElementById('loader').classList.remove('active');
            }
        }
        
        function displayGameResult(data) {
            document.getElementById('resultTitle').innerText = data.name || 'Jogo';
            document.getElementById('resultImage').src = data.image || 'https://placehold.co/300x140/111/fff?text=No+Image';
            document.getElementById('resultPrice').innerText = formatPrice(data.currentPrice);
            
            if (data.originalPrice && data.originalPrice > data.currentPrice) {
                document.getElementById('resultOriginal').innerText = formatPrice(data.originalPrice);
                document.getElementById('resultOriginal').style.display = 'inline';
                const discount = Math.round((1 - data.currentPrice / data.originalPrice) * 100);
                document.getElementById('resultDiscount').innerText = `-${discount}%`;
                document.getElementById('resultDiscount').style.display = 'inline';
            } else {
                document.getElementById('resultOriginal').style.display = 'none';
                document.getElementById('resultDiscount').style.display = 'none';
            }
            
            // Stores
            const storesGrid = document.getElementById('storesGrid');
            storesGrid.innerHTML = '';
            if (data.stores && data.stores.length > 0) {
                data.stores.forEach(store => {
                    storesGrid.innerHTML += `
                        <div class="store-card">
                            <div>
                                <div class="store-name">${store.name}</div>
                                <div class="store-price">${formatPrice(store.price)}</div>
                            </div>
                            <a href="${store.url}" target="_blank" class="store-link">Comprar</a>
                        </div>
                    `;
                });
            }
            
            // Chart
            if (data.history && data.history.length > 0) {
                renderPriceChart(data.history);
                
                const prices = data.history.map(h => h.price);
                document.getElementById('statLowest').innerText = formatPrice(Math.min(...prices));
                document.getElementById('statHighest').innerText = formatPrice(Math.max(...prices));
                document.getElementById('statAverage').innerText = formatPrice(prices.reduce((a,b) => a+b, 0) / prices.length);
                
                if (data.originalPrice) {
                    const savings = data.originalPrice - data.currentPrice;
                    document.getElementById('statSavings').innerText = formatPrice(savings);
                }
            }
            
            document.getElementById('gameResult').classList.add('active');
        }
        
        function displayDemoData(query) {
            // Buscar AppID real do jogo na Steam
            searchSteamGame(query).then(steamData => {
                const demoData = {
                    name: steamData.name || query,
                    image: steamData.image || 'https://placehold.co/300x140/111/fff?text=No+Image',
                    currentPrice: steamData.price || 149.90,
                    originalPrice: steamData.originalPrice || 299.90,
                    stores: [
                        { name: 'Steam', price: steamData.price || 149.90, url: steamData.storeUrl || 'https://store.steampowered.com' },
                        { name: 'Nuuvem', price: (steamData.price || 149.90) * 0.93, url: 'https://nuuvem.com' },
                        { name: 'Green Man Gaming', price: (steamData.price || 149.90) * 0.97, url: 'https://greenmangaming.com' },
                        { name: 'Fanatical', price: (steamData.price || 149.90) * 1.02, url: 'https://fanatical.com' }
                    ],
                    history: generateDemoHistory(steamData.price || 149.90)
                };
                
                displayGameResult(demoData);
            });
        }
        
        async function searchSteamGame(query) {
            const PROXIES = ['https://api.allorigins.win/raw?url=', 'https://corsproxy.io/?'];
            
            try {
                // Buscar na API Steam Store
                const searchUrl = `https://store.steampowered.com/api/storesearch/?term=${encodeURIComponent(query)}&l=brazilian&cc=BR`;
                
                let data = null;
                for (const proxy of PROXIES) {
                    try {
                        const res = await fetch(proxy + encodeURIComponent(searchUrl));
                        if (res.ok) {
                            data = await res.json();
                            break;
                        }
                    } catch(e) { console.log('Proxy failed:', proxy); }
                }
                
                if (data && data.items && data.items.length > 0) {
                    const game = data.items[0];
                    const appId = game.id;
                    
                    // Buscar detalhes do jogo
                    const detailsUrl = `https://store.steampowered.com/api/appdetails?appids=${appId}&cc=BR&l=brazilian`;
                    
                    let details = null;
                    for (const proxy of PROXIES) {
                        try {
                            const res = await fetch(proxy + encodeURIComponent(detailsUrl));
                            if (res.ok) {
                                details = await res.json();
                                break;
                            }
                        } catch(e) {}
                    }
                    
                    if (details && details[appId] && details[appId].success) {
                        const gameData = details[appId].data;
                        return {
                            name: gameData.name,
                            image: gameData.header_image,
                            price: gameData.price_overview ? gameData.price_overview.final / 100 : 0,
                            originalPrice: gameData.price_overview ? gameData.price_overview.initial / 100 : 0,
                            storeUrl: `https://store.steampowered.com/app/${appId}`,
                            appId: appId
                        };
                    }
                    
                    // Fallback: usar dados básicos da busca
                    return {
                        name: game.name,
                        image: `https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/${appId}/header.jpg`,
                        price: game.price ? game.price.final / 100 : 0,
                        originalPrice: game.price ? game.price.initial / 100 : 0,
                        storeUrl: `https://store.steampowered.com/app/${appId}`,
                        appId: appId
                    };
                }
            } catch (error) {
                console.error('Erro ao buscar jogo:', error);
            }
            
            // Fallback se nada funcionar
            return {
                name: query,
                image: 'https://placehold.co/300x140/111/fff?text=' + encodeURIComponent(query),
                price: 99.90,
                originalPrice: 199.90,
                storeUrl: 'https://store.steampowered.com'
            };
        }
        
        function generateDemoHistory(basePrice = 299.90) {
            const history = [];
            let currentPrice = basePrice;
            
            for (let i = 12; i >= 0; i--) {
                const date = new Date();
                date.setMonth(date.getMonth() - i);
                
                // Simular promoções
                if (Math.random() > 0.7) {
                    currentPrice = basePrice * (0.5 + Math.random() * 0.3);
                } else {
                    currentPrice = basePrice * (0.8 + Math.random() * 0.2);
                }
                
                history.push({
                    date: date.toISOString().split('T')[0],
                    price: Math.round(currentPrice * 100) / 100
                });
            }
            
            return history;
        }
        
        function renderPriceChart(history) {
            const ctx = document.getElementById('priceChart').getContext('2d');
            
            if (priceChart) priceChart.destroy();
            
            priceChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: history.map(h => {
                        const d = new Date(h.date);
                        return d.toLocaleDateString('pt-BR', { month: 'short', year: '2-digit' });
                    }),
                    datasets: [{
                        label: 'Preço',
                        data: history.map(h => h.price),
                        borderColor: '#00f3ff',
                        backgroundColor: 'rgba(0, 243, 255, 0.1)',
                        fill: true,
                        tension: 0.3,
                        pointBackgroundColor: '#00f3ff',
                        pointBorderColor: '#fff',
                        pointRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: (ctx) => formatPrice(ctx.raw)
                            }
                        }
                    },
                    scales: {
                        y: {
                            ticks: { 
                                color: '#94a3b8',
                                callback: (val) => 'R$ ' + val.toFixed(0)
                            },
                            grid: { color: 'rgba(255,255,255,0.05)' }
                        },
                        x: {
                            ticks: { color: '#94a3b8' },
                            grid: { display: false }
                        }
                    }
                }
            });
        }
        
        async function loadTopDeals() {
            const grid = document.getElementById('dealsGrid');
            
            try {
                const response = await fetch('http://localhost:3000/api/deals');
                const deals = await response.json();
                
                if (deals.error) throw new Error(deals.error);
                
                renderDeals(deals);
            } catch (error) {
                // Dados demo
                const demoDeals = [
                    { name: 'Elden Ring', price: 149.90, image: 'https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/1245620/header.jpg' },
                    { name: 'Cyberpunk 2077', price: 99.90, image: 'https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/1091500/header.jpg' },
                    { name: 'Red Dead Redemption 2', price: 119.90, image: 'https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/1174180/header.jpg' },
                    { name: 'God of War', price: 89.90, image: 'https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/1593500/header.jpg' },
                    { name: 'Hades', price: 28.49, image: 'https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/1145360/header.jpg' },
                    { name: 'Hollow Knight', price: 14.49, image: 'https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/367520/header.jpg' }
                ];
                renderDeals(demoDeals);
            }
        }
        
        function renderDeals(deals) {
            const grid = document.getElementById('dealsGrid');
            grid.innerHTML = '';
            
            deals.forEach(deal => {
                grid.innerHTML += `
                    <div class="wishlist-card" onclick="document.getElementById('gameSearch').value='${deal.name}'; searchGame();">
                        <img src="${deal.image}" class="wishlist-img" onerror="this.src='https://placehold.co/250x120/111/fff?text=No+Image'">
                        <div class="wishlist-info">
                            <div class="wishlist-name">${deal.name}</div>
                            <div class="wishlist-price">${formatPrice(deal.price)}</div>
                        </div>
                    </div>
                `;
            });
        }
        
        function formatPrice(price) {
            return 'R$ ' + price.toFixed(2).replace('.', ',');
        }
        
        // Carregar tema do localStorage
        function loadTheme() {
            const savedTheme = localStorage.getItem('selectedTheme') || 'default';
            document.body.classList.remove('theme-rgb', 'theme-retro', 'theme-light', 'theme-dark', 'theme-matrix', 'theme-fire');
            if (savedTheme !== 'default') {
                document.body.classList.add(`theme-${savedTheme}`);
            }
        }
        
        // Enter para buscar
        document.getElementById('gameSearch').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') searchGame();
        });
        
        // Inicializar idioma
        function initLanguage() {
            const savedLang = localStorage.getItem('preferredLanguage');
            if (savedLang && typeof setLanguage === 'function') {
                setLanguage(savedLang);
            } else if (typeof translatePage === 'function') {
                translatePage();
            }
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            loadTheme();
            initLanguage();
        });
    </script>
</body>
</html>